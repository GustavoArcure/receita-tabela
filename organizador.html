<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Organizador de Controlados</title>
  <link rel="icon" href="logo.png" type="image/png" />

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to top, #FFCCBC, #ffffff);
      padding: 30px;
      margin: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    h2 {
      text-align: center;
      color: #333;
    }

    .logo-container {
      text-align: left;
      margin-bottom: 20px;
    }

    .logo-container img {
      height: 60px;
      width: auto;
    }

    textarea {
      width: 100%;
      height: 180px;
      padding: 10px;
      font-family: monospace;
      font-size: 14px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }

    .button-group {
      text-align: center;
      margin-bottom: 20px;
    }

    button {
      background-color: #FF7043;
      border: none;
      color: white;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #e64a19;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }

    th {
      background-color: #FF7043;
      color: white;
    }

    .back-button {
      text-align: center;
      margin: 30px 0;
    }

    .back-button a button {
      background-color: #FF7043;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .back-button a button:hover {
      background-color: #e64a19;
    }

    footer {
      background-color: #FF7043;
      color: white;
      text-align: center;
      padding: 15px 10px;
      font-size: 14px;
      margin-top: auto;
    }

    @media print {
      .no-print, textarea, h2, .back-button, footer {
        display: none;
      }

      table {
        page-break-after: always;
      }
    }
  </style>
</head>
<body>

  <div class="logo-container">
    <img src="logo.png" alt="Logo da Farmácia" />
  </div>

  <h2>Organizador de Controlados</h2>

  <div class="no-print">
    <textarea id="inputData" placeholder="Cole aqui os dados copiados do sistema..."></textarea>
    <div class="button-group">
      <button onclick="processarDados()">Processar</button>
      <button onclick="window.print()">Imprimir</button>
    </div>
  </div>

  <table id="tabelaResultado">
    <thead>
      <tr>
        <th>Medicamento</th>
        <th>Data</th>
        <th>Quantidade Vendida</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="back-button">
    <a href="index.html">
      <button>Voltar ao Menu</button>
    </a>
  </div>

  <footer>
    © 2025 Gustavo Bispo dos Santos. Todos os direitos reservados.
  </footer>

  <script>
    function processarDados() {
      const input = document.getElementById('inputData').value.trim();
      const linhas = input.split('\n');
      const tbody = document.querySelector('#tabelaResultado tbody');
      tbody.innerHTML = '';

      linhas.forEach(linha => {
        const colunas = linha.split('\t');

        if (colunas.length >= 13) {
          const periodo = colunas[2]; // Coluna "Período"
          const dataMatch = periodo.match(/DE (\d{2}\/\d{2}\/\d{4}) A/);
          const data = dataMatch ? dataMatch[1] : '';

          const medicamento = colunas[8]; // Descrição do medicamento
          const qtde = parseInt(colunas[12]); // Quantidade vendida

          if (medicamento && data && qtde > 0) {
            const tr = document.createElement('tr');

            const tdMed = document.createElement('td');
            tdMed.textContent = medicamento;
            tr.appendChild(tdMed);

            const tdData = document.createElement('td');
            tdData.textContent = data;
            tr.appendChild(tdData);

            const tdQtd = document.createElement('td');
            tdQtd.textContent = qtde;
            tr.appendChild(tdQtd);

            tbody.appendChild(tr);
          }
        }
      });
    }
  </script>

</body>
</html>
